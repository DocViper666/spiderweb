<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Spiderweb: SPIDERWEB</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Spiderweb
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SPIDERWEB </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li><b>Author:</b> Corrado Gerbaldo - IU1BOW.</li>
<li><b>Mail:</b> <a href="#" onclick="location.href='mai'+'lto:'+'cor'+'ra'+'do.'+'ge'+'rba'+'ld'+'o@g'+'ma'+'il.'+'co'+'m'; return false;">corra<span style="display: none;">.nosp@m.</span>do.g<span style="display: none;">.nosp@m.</span>erbal<span style="display: none;">.nosp@m.</span>do@g<span style="display: none;">.nosp@m.</span>mail.<span style="display: none;">.nosp@m.</span>com</a></li>
<li><b>Licensing:</b> Gpl V3.0 see ["LICENSE"](LICENSE) file.</li>
<li><b>Languages:</b> This application is written in Python/flask,Javascript and HTML <hr/>
 <b>DXSpider</b> is a great DX Cluster software that has a usefull telnet interface. I wrote this application in order to add a web user interface to DXSpider and show the spots collected. The user could see 50 spots at time and filter them by band, spotter continent and spotted continent.</li>
</ul>
<p>For this application I've used:</p><ul>
<li><b>Bootstrap</b> for stylesheet CSS</li>
<li><b>Jquery</b> In the header you can find the link to MS link</li>
<li><b>qrz.com</b> For each callsing found you can click on lens and you'll see him on qrz.com</li>
<li><b>flag-icon-css</b> <a href="https://github.com/lipis/flag-icon-css">https://github.com/lipis/flag-icon-css</a> I used it for show the country flags</li>
<li><b>cookie-bar.eu</b> I use it for cookie bar</li>
</ul>
<p>You can find my web site at <a href="https://www.i1bow.it">https://www.iu1bow.it</a></p>
<p><b>New Release 2.0.!!!</b> It uses Python 3 and Bootstrap 5 see file <a class="el" href="CHANGELOG_8md.html">docs/CHANGELOG.md</a><a class="el" href="CHANGELOG_8md.html">CHANGELOG.md</a>""</p>
<p><b>1) DXSpider</b> First of all you have to installed <a href="http://www.dxcluster.org/">DXspider</a> and connected with some other cluster nodes.</p>
<p><b>2) MariaDB / MySQL</b> Then you have to install MariaDB on your web server, on the same server where DXSpider is running and configure DXSpider to use it: in your spider folder edit <code>local/DXVars.pm</code> adding these lines: </p><div class="fragment"><div class="line">{DXWars.pm}</div><div class="line"># the SQL database DBI dsn</div><div class="line">$dsn = &quot;dbi:mysql:dxcluster:localhost:3306&quot;;</div><div class="line">$dbuser = &quot;your-user&quot;;</div><div class="line">$dbpass = &quot;your-password&quot;; </div></div><!-- fragment --><p> If you would change some MariaDB parameters, then you can find them in <code>/etc/mysql/my.cnf</code> or <code>/etc/my.cnf</code>, depending on your distro. If the database will not be created automatically, please see <a class="el" href="md_docs_DB_ISSUES.html">DB_ISSUES</a><a class="el" href="DB__ISSUES_8md.html">DB_ISSUES.md</a>""</p>
<p><b>3) Python / Flask</b> First of all you have to install the python3 pip installer </p><div class="fragment"><div class="line">foo@bar:~$ sudo apt install python3-pip</div></div><!-- fragment --><p>This application is based on Flask To install <b>Flask</b>: </p><div class="fragment"><div class="line">foo@bar:~$ pip3 install flask </div></div><!-- fragment --><p> or </p><div class="fragment"><div class="line">foo@bar:~$ sudo -H pip3 install flask --system </div></div><!-- fragment --><p> Then you have to install mysql libraries**: </p><div class="fragment"><div class="line">foo@bar:~$ pip3 install flask_mysqldb  </div><div class="line">or</div><div class="line">foo@bar:~$ sudo -H pip3 install flask_mysqldb --system </div></div><!-- fragment --><p>Finally you have to install matplotlib in order to plots some graphics </p><div class="fragment"><div class="line">foo@bar:~$ pip3 install matplotlib </div><div class="line">or</div><div class="line">foo@bar:~$ sudo -H pip3 install matplotlib --system   </div></div><!-- fragment --><p>In the path <code>spiderweb/cfg/</code> rename <code>config.json.template</code> in <code>config.json</code>: </p><div class="fragment"><div class="line">foo@bar:~$ mv config.json.template config.json</div></div><!-- fragment --><p> then edit it and set the user and password of your database, the menu items, and other stuffs (callsign, mail address...). Othewhise, if you preferr, you could use an utility for edit your configuration and menu. Go in "script" folder and run ./config.sh</p>
<div class="fragment"><div class="line">foo@bar:~$ cd scripts</div><div class="line">foo@bar:~$ ./config.sh</div><div class="line"></div><div class="line">*** DxSpider configuration ***</div><div class="line">Configuration file loaded from: ../cfg/config.json</div><div class="line"></div><div class="line">   h:  help</div><div class="line">   vc: view config.</div><div class="line">   ec: edit config.</div><div class="line">   vm: view menu</div><div class="line">   em: edit menu</div><div class="line">   s:  save</div><div class="line">   t:  load config. from template</div><div class="line"></div><div class="line">   x:  exit</div><div class="line"></div><div class="line">Make your choiche: </div></div><!-- fragment --><p>In order to show the right <em>plots</em>, you have to generate them! To do so you have to run *.sh* files inside <em>scripts</em> folders, or the better way is to <b>schedule</b> them with your <b>crontab</b> </p><div class="fragment"><div class="line">foo@bar:~$ crontab -e</div></div><!-- fragment --><p> then edit it in a manner like this: </p><div class="fragment"><div class="line">0 23 * * * /foo/bar/spiderweb/scripts/qso_months.sh &gt; /dev/null 2&gt;&amp;1</div><div class="line">*/15 * * * * /foo/bar/spiderweb/scripts/propagation_heatmaps.sh &gt; /dev/null 2&gt;&amp;1</div></div><!-- fragment --><p>Now you can run your web application with the following command: </p><div class="fragment"><div class="line">foo@bar:~$ python3 webapp.py</div></div><!-- fragment --><p> The flask default port is 5000, so you can see your web app, typing <code><a href="http://localhost:5000">http://localhost:5000</a></code> in your web browser. Keep in mind that the flask web server, usually is used as a test server.</p>
<p>There are some ways to use it in production.</p>
<p>My configuration is: Cloudflare + Nginx + Bjoern</p>
<p>**Bjoern is a lightweight WSGI for python.</p>
<p>for install it: </p><div class="fragment"><div class="line">foo@bar:~$ sudo apt install libev-dev libevdev2</div><div class="line">foo@bar:~$ pip3 install bjoern</div></div><!-- fragment --><p>If you want you can make it as a <em>daemon service</em>. Create and edit a file named for example spiderweb.service (in the systemd folder)</p>
<div class="fragment"><div class="line">foo@bar:~$ sudo nano /etc/systemd/system/spiderweb.service</div></div><!-- fragment --><p> Below an example of configuration: </p><div class="fragment"><div class="line">[Unit]</div><div class="line">Description=bjoern instance spiderweb</div><div class="line">After=network.target</div><div class="line">After=multi-user.target</div><div class="line"></div><div class="line">[Service]</div><div class="line">User=web</div><div class="line">Group=www-data</div><div class="line">Type=simple</div><div class="line">WorkingDirectory=/home/web/spiderweb</div><div class="line">Environment=&quot;PATH=/home/web/spiderweb&quot;</div><div class="line">ExecStart=/usr/bin/python3 /home/web/spiderweb/wsgi.py</div><div class="line"></div><div class="line">[Install]</div><div class="line">WantedBy=multi-user.target</div></div><!-- fragment --><p>Then you can install and start the daemon: </p><div class="fragment"><div class="line">foo@bar:~$ sudo systemctl enable spiderweb.service</div><div class="line">foo@bar:~$ sudo systemctl start spiderweb.service</div><div class="line">foo@bar:~$ sudo systemctl status spiderweb.service</div><div class="line"></div><div class="line">● spiderweb.service - bjoern instance spiderweb</div><div class="line">   Loaded: loaded (/etc/systemd/system/spiderweb.service; enabled; vendor preset: enabled)</div><div class="line">   Active: active (running) since Sun 2020-10-25 09:56:35 UTC; 8h ago</div><div class="line"> Main PID: 6518 (python3)</div><div class="line">    Tasks: 1 (limit: 420)</div><div class="line">   CGroup: /system.slice/spiderweb.service</div><div class="line">           └─6518 /usr/bin/python3 /home/web/spiderweb/wsgi.py</div><div class="line"></div><div class="line">Oct 25 09:56:35 dxcluster01 systemd[1]: Started bjoern instance spiderweb.</div></div><!-- fragment --><p> Now you can install and configura NGINX</p>
<p>Install with </p><div class="fragment"><div class="line">foo@bar:~$ sudo apt install nginx</div></div><!-- fragment --><p>Configure: </p><div class="fragment"><div class="line">sudo nano /etc/nginx/sites-available/myapp</div></div><!-- fragment --><div class="fragment"><div class="line">server {</div><div class="line">    listen 80;</div><div class="line">    server_name iu1bow.it www.iu1bow.it;</div><div class="line">    location ^~ /.well-known/ {</div><div class="line">      alias /home/web/verify/.well-known/;</div><div class="line">    }</div><div class="line"></div><div class="line">    location / {</div><div class="line">        ssi off;</div><div class="line">        include proxy_params;</div><div class="line">        proxy_pass http://localhost:8080/;</div><div class="line">        proxy_set_header Host $host;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>For SSL I'm using <a href="https://www.cloudflare.com/">Cloudflare</a>. This is a free service that alow you to use https and a proxy cache.</p>
<p><b>Search engine indexing:</b> when you are on-line, if you would to index your website on search engines, you have to generate a file named sitemap.xml and put it in /static/ folder. There are many tool to generate sitemap.xml, for example <a href="https://www.xml-sitemaps.com/">www.xml-sitemaps.com</a></p>
<p><b>Index on MySQL:</b> if you would to increase speed on callsign search, you could define some index on the table 'spot'. You can see more details on <a href="scripts/create_mysql_index.sql">"create_mysql_index.sql"</a></p>
<p>you can use the scritp <code>scripts/monitoring.sh</code> in order to monitoring your sistem. Check instruction inside this scripts.</p>
<div class="image">
<img src="docs/images/01_desktop_main.jpg" width="300"/>
</div>
 <div class="image">
<img src="docs/images/02_desktop_plot.jpg" width="300"/>
</div>
 <div class="image">
<img src="docs/images/03_mobile_install.jpg" width="200"/>
</div>
 <div class="image">
<img src="docs/images/04_mobile_icon.jpg" width="200"/>
</div>
 <div class="image">
<img src="docs/images/05_mobile_splash.jpg" width="200"/>
</div>
 <div class="image">
<img src="docs/images/06_mobile_main.jpg" width="200"/>
</div>
 <p>see it on file <a class="el" href="TODO_8md.html">docs/TODO.md</a><a class="el" href="TODO_8md.html">TODO.md</a>"" </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
