var adxo_url="https://www.ng3k.com/misc/adxo.html",qrz_url="https://www.qrz.com/db/";function findAdxo(t,e){if(t)for(var a=0;a<t.length;a++)if(t[a].callsign==e)return t[a]}function buildHtmlTable(t,e,a,r){if(null!=e){var n=new Array,l=new Date,d="00"+l.getUTCDate();d=d.substring(d.length-2,d.length);var o="00"+(Number(l.getUTCMonth())+1);o=o.substring(o.length-2,o.length);var s=l.getUTCFullYear();dt_current=d+"/"+o+"/"+s,$(t).empty();for(var i=0;i<e.length;i++){n[i]=e[i].rowid;var c=$('<tr id="'+e[i].rowid+'"/>'),b=a.find(t=>t==e[i].rowid);null!=r?r==e[i].de?c=$('<tr id="'+e[i].rowid+'"/>'):r==e[i].dx&&(c=$('<tr id="'+e[i].rowid+'"/>')):null==b&&a.length>0&&(c=$('<tr class="table-info" id="'+e[i].rowid+'"/>')),e[i].de==r?de="<mark>"+e[i].de+"</mark>":de=e[i].de,c.append($("<td/>").html('<a href="'+qrz_url+e[i].de+'" target="_blank" rel="noopener"><i class="bi-search" role="button" aria-label="'+e[i].de+'"></i></a><span>&nbsp'+de+"</span></b>"));var g=Intl.NumberFormat("it-IT",{style:"decimal"}).format(e[i].freq);c.append($("<td/>").html('<span class="badge bg-warning text-dark badge-responsive">'+g+"</span>")),e[i].dx==r?dx="<mark>"+e[i].dx+"</mark>":dx=e[i].dx;var p=findAdxo(my_adxo_events,e[i].dx),u="<a href="+adxo_url+" target=_blank rel=noopener >NG3K Website</a>";null!=p&&(dx=dx+'&nbsp<i tabindex="0" class="bi-megaphone-fill" style="color: cornflowerblue; " role="button" aria-label="dx_operations" data-bs-container="body" data-bs-toggle="popover" data-bs-trigger="focus" data-bs-sanitize="true" data-bs-placement="auto" data-bs-html="true" data-bs-title="Announced DX Op.: '+p.summary+'" data-bs-content="'+p.description+" data from &nbsp"+u+'"></i>'),c.append($("<td/>").html('<a href="'+qrz_url+e[i].dx+'" target="_blank" rel="noopener"><i class="bi-search" role="button" aria-label="'+e[i].dx+'"></i></a><span>&nbsp'+dx+"</span>"));try{c.append($("<td/>").html('<span class="img-flag flag-icon flag-icon-'+e[i].iso+'" data-bs-container="body" data-bs-toggle="popover" data-bs-trigger="hover" data-bs-placement="left" data-bs-content="'+e[i].country+'"></span>'))}catch(t){c.append($("<td/>"))}c.append($('<td class="d-none d-lg-table-cell d-xl-table-cell"/>').html(e[i].country)),c.append($('<td class="d-none d-lg-table-cell d-xl-table-cell"/>').html(e[i].comm));var m=new Date(1e3*e[i].time),h="00"+m.getUTCHours();h=h.substring(h.length-2,h.length);var f="00"+m.getMinutes();f=f.substring(f.length-2,f.length);var x="00"+m.getUTCDate();x=x.substring(x.length-2,x.length);var v="00"+(Number(m.getUTCMonth())+1);v=v.substring(v.length-2,v.length);var y=m.getUTCFullYear();tm=h+":"+f,(m=x+"/"+v+"/"+y)==dt_current?c.append($("<td/>").html(tm)):c.append($("<td/>").html('<table class="table-sm table-borderless"><tbody><tr style="background-color:transparent"><td>'+tm+"</td></tr><tr><td>"+m+"</td></tr></tbody></table>")),$(t).append(c)}$(function(){$('[data-bs-toggle="popover"]').popover({container:t})});try{return Array.from(n)}catch(t){return}}}function mySearch(t){t.preventDefault(),myTimer()}function getFilter(t,e,a,r){selectedFilter=[].map.call(document.getElementById(t).selectedOptions,t=>t.value);var n="";return(selectedFilter.length<a||-1==a)&&(n=selectedFilter.map(function(t,a){return t?e+"="+t:""}).join("&"),"&"==(r=r.concat("&".concat(n))).substring(0,1)&&(r=r.substring(1))),r}function myTimer(){var t=new XMLHttpRequest,e="";e=getFilter("band","b",14,e),e=getFilter("de_re","e",7,e),e=getFilter("dx_re","x",7,e),e=getFilter("mode","m",3,e),e=getFilter("cqdeInput","qe",-1,e);var a="spotlist";(e=getFilter("cqdxInput","qx",-1,e))&&(a=a.concat("?".concat(e))),t.open("GET",a,!0),t.onload=function(){try{rows_list=buildHtmlTable("#bodyspot",JSON.parse(this.response),rows_list)}catch(t){console.log(t),console.log(t.stack)}},t.send()}