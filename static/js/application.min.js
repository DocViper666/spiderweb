function findCountry(e,t){for(var n=0;n<e.length;n++)if(e[n].WPX==t)return e[n]}function buildHtmlTable(e,t,n,a){var l=new Array;$(e).empty();for(var r=0;r<t.length;r++){l[r]=t[r].rowid;var s=$('<tr id="'+t[r].rowid+'"/>');null==n.find(e=>e==t[r].rowid)&&n.length>0&&(s=$('<tr class="table-primary" id="'+t[r].rowid+'"/>'));var d=findCountry(a,t[r].spotdxcc);s.append($("<td/>").html('<a href="https://www.qrz.com/db/'+t[r].de+'" target="_blank" rel="noopener"><i class="search" aria-label="'+t[r].de+'"></i></a><span>&nbsp'+t[r].de+"</span>"));var c=Intl.NumberFormat("it-IT",{style:"decimal"}).format(t[r].freq);s.append($("<td/>").html('<span class="badge badge-warning badge-responsive">'+c+"</span>")),s.append($("<td/>").html('<a href="https://www.qrz.com/db/'+t[r].dx+'" target="_blank" rel="noopener"><i class="search" aria-label="'+t[r].dx+'"></i></a><span>&nbsp'+t[r].dx+"</span>"));try{s.append($("<td/>").html('<a href="#" data-toggle="tooltip" title="'+d.country+'"><img src="https://www.countryflags.io/'+d.ISO+'/shiny/24.png" alt="'+d.country+'"></a>'))}catch(e){s.append($("<td/>"))}s.append($('<td class="d-none d-lg-table-cell d-xl-table-cell"/>').html(t[r].comm));var o=new Date(1e3*t[r].time),i="00"+o.getUTCHours();i=i.substring(i.length-2,i.length);var p="00"+o.getMinutes();p=p.substring(p.length-2,p.length);var m="00"+o.getDate();m=m.substring(m.length-2,m.length);var u="00"+(Number(o.getUTCMonth())+1);u=u.substring(u.length-2,u.length);var g=o.getUTCFullYear();tm=i+":"+p,o=m+"/"+u+"/"+g,s.append($("<td/>").html(tm)),s.append($('<td class="d-none d-lg-table-cell d-xl-table-cell"/>').html(o)),$(e).append(s)}try{return Array.from(l)}catch(e){return}}function mySearch(e){e.preventDefault(),myTimer()}function myTimer(){var e=new XMLHttpRequest;selectedBands=[].map.call(document.getElementById("band").selectedOptions,e=>e.value),selectedDEre=[].map.call(document.getElementById("de_re").selectedOptions,e=>e.value),selectedDXre=[].map.call(document.getElementById("dx_re").selectedOptions,e=>e.value);var t="",n="";selectedBands.length<14&&(t=selectedBands.map(function(e,t){return"b="+e}).join("&"));var a="";selectedDEre.length<7&&(a=selectedDEre.map(function(e,t){return"e="+e}).join("&")),n=t&&a?t.concat("&".concat(a)):t.concat(a);var l="";selectedDXre.length<7&&(l=selectedDXre.map(function(e,t){return"x="+e}).join("&"));var r="spotlist";(n=n&&l?n.concat("&".concat(l)):n.concat(l))&&(r=r.concat("?".concat(n))),e.open("GET",r,!0),e.onload=function(){try{rows_list=buildHtmlTable("#bodyspot",JSON.parse(this.response),rows_list,my_countries.country_codes)}catch(e){console.log(this.response)}},e.send()}