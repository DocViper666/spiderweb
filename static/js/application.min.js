function findCountry(e,t){for(var n=0;n<e.length;n++)if(e[n].WPX==t)return e[n]}function transcodeArea(e){if(null!=e){var t=e;return null!=t.areacode&&(t.areacode=t.areacode.replace("UK","GB"),t.areacode=t.areacode.replace("FL","FI")),t}}function buildHtmlTable(e,t,n,a){var r=new Array;$(e).empty();for(var l=0;l<t.length;l++){r[l]=t[l].rowid;var c=$('<tr id="'+t[l].rowid+'"/>');null==n.find(e=>e==t[l].rowid)&&n.length>0&&(c=$('<tr class="table-primary" id="'+t[l].rowid+'"/>'));var s=findCountry(a,t[l].spotdxcc);c.append($("<td/>").html('<a href="https://www.qrz.com/db/'+t[l].de+'" target="_blank" rel="noopener"><i class="fas fa-search"></i></a><span>&nbsp'+t[l].de+"</span>"));var d=Intl.NumberFormat("it-IT",{style:"decimal"}).format(t[l].freq);c.append($("<td/>").html('<span class="badge badge-warning" style="width: 65px">'+d+"</span>")),c.append($("<td/>").html('<a href="https://www.qrz.com/db/'+t[l].dx+'" target="_blank" rel="noopener"><i class="fas fa-search"></i></a><span>&nbsp'+t[l].dx+"</span>"));try{c.append($("<td/>").html('<a href="#" data-toggle="tooltip" title="'+s.country+'"><img src="https://www.countryflags.io/'+s.ISO+'/shiny/24.png" alt="'+s.country+'"></a>'))}catch(e){c.append($("<td/>"))}c.append($('<td class="d-none d-lg-table-cell d-xl-table-cell"/>').html(t[l].comm));var o=new Date(1e3*t[l].time),i="00"+o.getUTCHours();i=i.substring(i.length-2,i.length);var p="00"+o.getMinutes();p=p.substring(p.length-2,p.length);var u="00"+o.getDate();u=u.substring(u.length-2,u.length);var m="00"+(Number(o.getUTCMonth())+1);m=m.substring(m.length-2,m.length);var g=o.getUTCFullYear();tm=i+":"+p,o=u+"/"+m+"/"+g,c.append($("<td/>").html(tm)),c.append($('<td class="d-none d-lg-table-cell d-xl-table-cell"/>').html(o)),$(e).append(c)}return Array.from(r)}function mySearch(e){e.preventDefault(),myTimer()}function myTimer(){var e=new XMLHttpRequest;selectedBands=[].map.call(document.getElementById("band").selectedOptions,e=>e.value),selectedDEre=[].map.call(document.getElementById("de_re").selectedOptions,e=>e.value),selectedDXre=[].map.call(document.getElementById("dx_re").selectedOptions,e=>e.value);var t="",n="";selectedBands.length<14&&(t=selectedBands.map(function(e,t){return"b="+e}).join("&"));var a="";selectedDEre.length<7&&(a=selectedDEre.map(function(e,t){return"e="+e}).join("&")),n=t&&a?t.concat("&".concat(a)):t.concat(a);var r="";selectedDXre.length<7&&(r=selectedDXre.map(function(e,t){return"x="+e}).join("&"));var l="spotlist";(n=n&&r?n.concat("&".concat(r)):n.concat(r))&&(l=l.concat("?".concat(n))),e.open("GET",l,!0),e.onload=function(){try{rows_list=buildHtmlTable("#bodyspot",JSON.parse(this.response),rows_list,my_countries.country_codes)}catch(e){console.log(this.response)}},e.send()}