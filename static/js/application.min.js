function findCountry(e,t){for(var a=0;a<e.length;a++)if(e[a].WPX==t)return e[a]}function transcodeArea(e){if(null!=e){var t=e;return null!=t.areacode&&(t.areacode=t.areacode.replace("UK","GB"),t.areacode=t.areacode.replace("FL","FI")),t}}function buildHtmlTable(e,t,a,n){var l=new Array;$(e).empty();for(var r=0;r<t.length;r++){l[r]=t[r].rowid;var c=$('<tr id="'+t[r].rowid+'"/>');null==a.find(e=>e==t[r].rowid)&&a.length>0&&(c=$('<tr class="table-primary" id="'+t[r].rowid+'"/>'));var d=findCountry(n,t[r].spotdxcc);c.append($("<td/>").html('<a href="https://www.qrz.com/db/'+t[r].de+'" target="_blank" rel="noopener"><i class="fas fa-search" aria-label="'+t[r].de+'"></i></a><span>&nbsp'+t[r].de+"</span>"));var s=Intl.NumberFormat("it-IT",{style:"decimal"}).format(t[r].freq);c.append($("<td/>").html('<span class="badge badge-warning" style="width: 65px">'+s+"</span>")),c.append($("<td/>").html('<a href="https://www.qrz.com/db/'+t[r].dx+'" target="_blank" rel="noopener"><i class="fas fa-search" aria-label="'+t[r].dx+'"></i></a><span>&nbsp'+t[r].dx+"</span>"));try{c.append($("<td/>").html('<a href="#" data-toggle="tooltip" title="'+d.country+'"><img src="https://www.countryflags.io/'+d.ISO+'/shiny/24.png" alt="'+d.country+'"></a>'))}catch(e){c.append($("<td/>"))}c.append($('<td class="d-none d-lg-table-cell d-xl-table-cell"/>').html(t[r].comm));var o=new Date(1e3*t[r].time),i="00"+o.getUTCHours();i=i.substring(i.length-2,i.length);var p="00"+o.getMinutes();p=p.substring(p.length-2,p.length);var u="00"+o.getDate();u=u.substring(u.length-2,u.length);var m="00"+(Number(o.getUTCMonth())+1);m=m.substring(m.length-2,m.length);var g=o.getUTCFullYear();tm=i+":"+p,o=u+"/"+m+"/"+g,c.append($("<td/>").html(tm)),c.append($('<td class="d-none d-lg-table-cell d-xl-table-cell"/>').html(o)),$(e).append(c)}return Array.from(l)}function mySearch(e){e.preventDefault(),myTimer()}function myTimer(){var e=new XMLHttpRequest;selectedBands=[].map.call(document.getElementById("band").selectedOptions,e=>e.value),selectedDEre=[].map.call(document.getElementById("de_re").selectedOptions,e=>e.value),selectedDXre=[].map.call(document.getElementById("dx_re").selectedOptions,e=>e.value);var t="",a="";selectedBands.length<14&&(t=selectedBands.map(function(e,t){return"b="+e}).join("&"));var n="";selectedDEre.length<7&&(n=selectedDEre.map(function(e,t){return"e="+e}).join("&")),a=t&&n?t.concat("&".concat(n)):t.concat(n);var l="";selectedDXre.length<7&&(l=selectedDXre.map(function(e,t){return"x="+e}).join("&"));var r="spotlist";(a=a&&l?a.concat("&".concat(l)):a.concat(l))&&(r=r.concat("?".concat(a))),e.open("GET",r,!0),e.onload=function(){try{rows_list=buildHtmlTable("#bodyspot",JSON.parse(this.response),rows_list,my_countries.country_codes)}catch(e){console.log(this.response)}},e.send()}